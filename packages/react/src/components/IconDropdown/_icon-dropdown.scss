@use '../../globals/theme';
@use '../../globals/spacing';
@use '../../globals/vars';
@use "../../globals/mixins";
@use '~@carbon/styles/scss/components/dropdown';

.#{vars.$iot-prefix}--dropdown__image-button:hover {
  border-color: transparent;

  ::before {
    opacity: 0;
  }
}

.#{vars.$iot-prefix}--icon-dropdown__footer {
  @include mixins.box-shadow();
  outline: 1px solid theme.$focus;
  position: absolute;

  background-color: theme.$ui-01;
  z-index: 5999; // dropdown z-index is 6000, this needs to render just below
  width: 100%;

  &-content {
    padding: spacing.$spacing-03;
  }
}

.#{vars.$iot-prefix}--icon-dropdown__selection-buttons {
  > .#{vars.$prefix}--list-box__field {
    padding: 0 spacing.$spacing-09 0 spacing.$spacing-05;
  }

  > .#{vars.$prefix}--list-box__menu {
    transition: initial;
    box-shadow: none;
    outline-style: none;
    border: none;

    > .#{vars.$prefix}--list-box__menu-item--active {
      background: transparent;
    }

    > .#{vars.$prefix}--list-box__menu-item.#{vars.$prefix}--list-box__menu-item--highlighted {
      background: transparent;

      &:hover {
        > .bx--list-box__menu-item__option {
          > .#{vars.$iot-prefix}--dropdown__image-button {
            border-color: transparent;
          }
        }
      }

      > .bx--list-box__menu-item__option {
        > .#{vars.$iot-prefix}--dropdown__image-button {
          border-color: theme.$focus;
        }
      }
    }

    > .#{vars.$prefix}--list-box__menu-item {
      display: inline-flex;
      height: min-content;

      > .#{vars.$prefix}--list-box__menu-item__option {
        overflow: visible;
        border: none;
        height: min-content;
        padding: 0;
        margin: 0;

        display: flex;
        align-items: center;
        justify-items: center;

        &:hover {
          background: theme.$hover-ui;
        }

        > .#{vars.$iot-prefix}--icon-dropdown__selected-icon-label {
          display: none;
        }

        > .#{vars.$prefix}--list-box__menu-item__selected-icon {
          display: none;
        }

        > .#{vars.$iot-prefix}--icon-dropdown__image-button {
          border-width: 1px;
          border-style: solid;
          border-top-color: transparent;
          border-right-color: theme.$ui-03;
          border-bottom-color: theme.$ui-03;
          border-left-color: transparent;

          color: transparent;

          &--leading {
            border-left-color: transparent;
          }

          &--trailing {
            border-right-color: transparent;
          }

          &--bottom {
            border-bottom-color: transparent;
          }

          &--top {
            border-top-color: theme.$ui-03;
          }

          &:hover {
            color: transparent;
          }

          > .bx--assistive-text {
            display: none;
          }
        }
      }
    }
  }

  .#{vars.$prefix}--list-box__label {
    > .#{vars.$iot-prefix}--icon-dropdown__image-button {
      display: none;
    }

    > .#{vars.$iot-prefix}--icon-dropdown__text {
      height: 100%;
    }
  }
}

.#{vars.$iot-prefix}--icon-dropdown__selected-icon-label {
  display: flex;
  height: 100%;

  > svg {
    min-width: 16px;
    width: 16px;
    height: 100%;
  }

  &__content {
    margin: auto spacing.$spacing-03;

    overflow: hidden;
    text-overflow: ellipsis;

    &--open {
      color: theme.$active-ui;
    }
  }
}
