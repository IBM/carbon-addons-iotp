import TableColumnCustomizationTOC from './TableColumnCustomizationTOC.mdx';
import TableUserViewManagementTOC from './TableUserViewManagementTOC.mdx';

# `Table` component

## Table of Contents

- [Getting started](#getting-started)
- [Sorting](#sorting)
  - [Handling the sort event](#handling-the-sort-event)
  - [Custom sorting](#custom-sorting)
  - [Multi-sorting](#multi-sorting)
- [Row expansion](#row-expansion)
  - [Programmatic expansion](#programmatic-expansion)
  - [Additional configuration](#additional-configuration)
- [Row nesting](#row-nesting)
  - [Row nesting code example](#row-nesting-code-example)
  - [Handling the onRowExpanded event](#handling-the-onrowexpanded-event)
  - [Load more child rows](#load-more-child-rows)
- [Selection and batch actions](#selection-and-batch-actions)
  - [Selections](#selections)
  - [Batch actions](#batch-actions)
  - [Programmatic selection and batch actions](#programmatic-selection-and-batch-actions)
- [Inline actions](#inline-actions)
  - [Handling the onApplyRowAction event](#handling-the-onapplyrowaction-event)
- [Filtering](#filtering)
  - [Simple Filtering](#simple-filtering)
    - [The column filter prop](#the-column-filter-prop)
    - [Programmatic filtering](#programmatic-filtering)
  - [☢️ Advanced Filtering Experimental](#%EF%B8%8F-advanced-filtering-experimental)
- [Pagination](#pagination)
- [Toolbar actions](#toolbar-actions)
- [Aggregation](#aggregation)
- [Row data editing](#row-data-editing)
- [Column customization](#column-customization)
  <TableColumnCustomizationTOC />
- [User view management](#user-view-management)
  <TableUserViewManagementTOC />
- [Props](#props)
  - [Column Prop](#column-prop)
  - [Data Prop](#data-prop)
  - [ExpandedData Prop](#expandeddata-prop)
  - [Options Prop](#options-prop)
  - [View Prop](#view-prop)
  - [Actions Prop](#actions-prop)
  - [i18n Prop](#i18n-prop)
- [Source Code](#source-code)
- [Feedback](#feedback)

## Getting started

You can implement a data table in your project by importing the `DataTable`
component and using it along with any additional table components that you need.

```js
import { Table } from 'carbon-addons-iot-react';
```

For basic table support, you can render the functional `<Table/>` component with only the columns and data props. This table does not have any state management built in. If you want that, use the `<StatefulTable/>` component or you will need to implement your own listeners and state management. You can reuse our tableReducer and tableActions with the useReducer hook to update state.

To enable simple search on a table, simply set the prop options.hasSearch=true. We wouldn’t recommend enabling column filters on a table and simple search for UX reasons, but it is supported.

Warning: Searching, filtering, and sorting is only enabled for strings, numbers, and booleans.

```js
const columns = [
  {
    id: 'string',
    name: 'String',
    filter: { placeholderText: 'enter a string' },
  },

  {
    id: 'date',
    name: 'Date',
    filter: { placeholderText: 'enter a date' },
  },
  {
    id: 'select',
    name: 'Select',
    filter: {
      placeholderText: 'pick an option',
      options: [
        {
          id: 'option-A',
          text: 'option-A',
        },
        {
          id: 'option-B',
          text: 'option-B',
        },
        {
          id: 'option-C',
          text: 'option-C',
        },
        {
          id: 'option-D',
          text: 'option-D',
        },
        {
          id: 'option-E',
          text: 'option-E',
        },
        {
          id: 'option-F',
          text: 'option-F',
        },
      ],
    },
  },
  {
    id: 'secretField',
    name: 'Secret Information',
  },
  {
    id: 'status',
    name: 'Status',
    renderDataFunction: ({ value }) => {
      // return custom component
    },
    sortFunction: ({ data, columnId, direction }) => {
      // return -1, 0, 1
    },
  },
  {
    id: 'number',
    name: 'Number',
    filter: { placeholderText: 'enter a number' },
  },
  {
    id: 'boolean',
    name: 'Boolean',
    filter: { placeholderText: 'true or false' },
  },
  {
    id: 'node',
    name: 'React Node',
  },
];
```

The `columns` will specify the columns used in your table. The `name`
property for each item will describe what the user sees in the table column
header. The `id` property is used to relate what value a row has for the given
column.

```js
const actions = {
  pagination: {
    /** Specify a callback for when the current page or page size is changed. This callback is passed an object parameter containing the current page and the current page size */
    onChangePage: () => {},
  },
  toolbar: {
    onApplyFilter: () => {},
    onToggleFilter: () => {},
    onShowRowEdit: () => {},
    onToggleColumnSelection: () => {},
    /** Specify a callback for when the user clicks toolbar button to clear all filters. Recieves a parameter of the current filter values for each column */
    onClearAllFilters: () => {},
    onCancelBatchAction: () => {},
    onApplyBatchAction: () => {},
    onApplySearch: () => {},
    /** advanced filter actions */
    onCancelAdvancedFilter: () => {},
    onRemoveAdvancedFilter: () => {},
    onCreateAdvancedFilter: () => {},
    onChangeAdvancedFilter: () => {},
    onApplyAdvancedFilter: () => {},
    onToggleAdvancedFilter: () => {},
  },
  table: {
    onRowClicked: () => {},
    onRowSelected: () => {},
    onSelectAll: () => {},
    onEmptyStateAction: () => {},
    onApplyRowAction: () => {},
    onRowExpanded: () => {},
    onChangeOrdering: () => {},
    onColumnSelectionConfig: () => {},
    onChangeSort: () => {},
    onColumnResize: () => {},
    onOverflowItemClicked: () => {},
  },
};
```

The `actions` used are the callbacks you can supply to update the table state if using a dumb `Table`, or take extra actions if using a `StatefulTable`.

```js
const data = [
  {
    id: 'row-id-1',
    values: {
      string: 'an example string',
      date: new Date().toISOString(),
      select: 'option-a',
      secretField: 'a hidden field',
      number: 1000,
      status: 'RUNNING',
      boolean: false,
      node: <Add20 />,
    }
    rowActions: [
      {
        id: 'drilldown',
        renderIcon: Arrow,
        iconDescription: 'Drill in',
        labelText: 'Drill in',
      },
      {
        id: 'Add',
        renderIcon: Add,
        iconDescription: 'Add',
        labelText: 'Add',
        isOverflow: true,
      },
    ]
  },
  // ...
];
```

You can use the `columns`, actions, and `data` props above to render a `Table` by
writing:

```jsx
<Table id="table" columns={columns} data={data} actions={actions} />
```

An example columns array:

```jsx
export const tableColumns = [
  {
    id: 'string',
    name: 'String',
    filter: { placeholderText: 'enter a string' },
    // allows adding custom overflow menu to the column header
    // calls the `onOverflowItemClicked` action with the id of the item clicked
    overflowMenuItems: [
      {
        id: 'stop',
        text: 'Stop',
      },
      {
        id: 'go',
        text: 'Go',
      },
    ],
  },

  {
    id: 'date',
    name: 'Date',
    filter: { placeholderText: 'enter a date' },
  },
  {
    id: 'select',
    name: 'Select',
    filter: {
      placeholderText: 'pick an option',
      // custom dropdown options to use as filters
      options: [
        {
          id: 'a',
          text: 'A',
        },
        {
          id: 'b',
          text: 'B',
        },
      ],
    },
  },
  {
    id: 'secretField',
    name: 'Secret Information',
  },
  {
    id: 'status',
    name: 'Status',
    renderDataFunction: ({ value }) => {
      // render a custom react node based on the value of this cell.
      return <AReactElement />;
    },
    sortFunction: ({ data, columnId, direction }) => {
      // sort the data based on given props and return sorted data;
      return sortedData;
    },
  },
  {
    id: 'number',
    name: 'Number',
    filter: { placeholderText: 'enter a number' },
  },
  {
    id: 'boolean',
    name: 'Boolean',
    filter: { placeholderText: 'true or false' },
  },
  {
    id: 'node',
    name: 'React Node',
  },
  {
    id: 'object',
    name: 'Object Id',
    renderDataFunction: ({ value }) => {
      // If given complex data in the table, use a custom renderDataFunction
      // to render the object into a simple value.
      return value?.id;
    },
    sortFunction: ({ data, columnId, direction }) => {
      // sort the data based on given props and return sorted data;
      return sortedData;
    },
    filter: {
      placeholderText: 'Filter object values...',
      filterFunction: (columnValue, filterValue) => {
        // custom filter function based on columnValue and current filterValue
        // returns a boolean based on the condition. ie:
        // return columnValue.id.includes(filterValue);
        return includeInFilter;
      },
    },
  },
];
```

After rendering a `Table` component using the code snippet above, you can
optionally add any number of features including sorting, row expansion,
filtering, row selection, batch actions through the `options` prop.

import Sorting from './Sorting.mdx';

<Sorting />

import RowExpansion from './RowExpansion.mdx';

<RowExpansion />

import RowNesting from './RowNesting.mdx';

<RowNesting />

import SelectionAndBatchActions from './SelectionAndBatchActions.mdx';

<SelectionAndBatchActions />

import InlineActions from './InlineActions.mdx';

<InlineActions />

import Filtering from './Filtering.mdx';

<Filtering />

## Pagination

Pagination is controlled through the `options.hasPagination` prop combined with the `view.pagination` prop. Pagination has one callback event for onChangePage that is fired when the page or the number of items per page changes.
By default, tables with pagination will expect the entire table data to be passed in on the `data` prop; the visible data for a page is calculated dynamically by the table based on the page size and page number. In the case where the table is rendering a large data set, the `options.hasOnlyPageData` prop can be used change this behavior. With `options.hasOnlyPageData = true`, the `data` prop will be expected to contain only the rows for the visible page.
The maxPages prop must be a positive integer and is used to limit the number of pages available the dropdown when working with very large datasets.

```jsx
<Table
  actions={{
    pagination: {
      onChangePage: ({ page, pageSize }) => {},
    },
  }}
  options={{
    hasPagination: true,
  }}
  view={{
    pagination: {
      isItemPerPageHidden: false,
      maxPages: 100,
      page: 1,
      pageSize: 10,
      pageSizes: [10, 20, 30],
      totalItems: undefined,
    },
  }}
/>
```

```jsx
<Table
  actions={{
    pagination: {
      onChangePage: ({ page, pageSize }) => {},
    },
  }}
  options={{
    hasPagination: true,
    hasOnlyPageData: true,
  }}
  view={{
    pagination: {
      pageSize: 10,
      pageSizes: [10, 20, 30],
      page: 8267,
      totalItems: 97532,
    },
  }}
/>
```

## Toolbar actions

You can add other actions to the toolbar overflow menu by using the toolbarActions prop on the view.toolbar.
When clicking on an action it will trigger the `onApplyToolbarAction` callback passing the object
used to create the action. If `toolbarActions` is a function, it can return an array of objects
representing the toolbarActions and these will be rendered dynamically when the overflow menu is opened.

The `isOverflow` prop will force the item to appear in the overflow menu, but by default it will
appear as another button in the toolbar.

```jsx
<Table
  id="table"
  columns={columns}
  data={data}
  actions={{
    toolbar: {
      onApplyToolbarAction: (actionObject) => {},
    },
  }}
  view={{
    toolbar: {
      toolbarActions: [
        {
          id: 'edit',
          labelText: 'Edit',
          // can be a handful of included icons
          renderIcon: 'edit',
          disabled: true,
          isOverflow: true,
        },
        // this item will appear in the toolbar, not the overflow menu, because it doesn't have
        // isOverflow:true
        {
          id: 'toggle',
          labelText: 'Toggle something',
          // can be an icon directly from @carbon/icons-react
          renderIcon: ViewOff16,
          // force this item to show in an active state
          isActive: true,
        },
        {
          id: 'delete',
          labelText: 'Delete',
          isDelete: true,
          hasDivider: true,
          // can be a function
          renderIcon: () => <TrashCan16 aria-label="Delete" />,
          isOverflow: true,
        },
        {
          id: 'hidden',
          labelText: 'Hidden',
          hidden: true,
          isOverflow: true,
        },
      ],
    },
  }}
/>
```

## Aggregation

The table can sum columns and show their aggregate total in a footer. A custom value can be passed, a function to sum the rows, or a default sum function will be provided. The `onToggleAggregations` prop passed to `actions.toolbar` serves as a callback to show or hide the the aggregations row in the bottom by changing the `aggregations.isHidden` prop.

```jsx
<Table
  actions={{
    toolbar: {
      onToggleAggregations: () => {},
    },
  }}
  options={{
    hasAggregations: true,
  }}
  view={{
    aggregations: {
      label: 'Total:',
      columns: [
        {
          id: 'number',
          align: 'start',
          isSortable: false,
          // a function to sum the totals, or a given total to display
          // value: (values) => string, '61056171'
        },
      ],
      isHidden: false,
    },
  }}
/>
```

## Row data editing

### Multi row data editing

Row data editing can be activated using the option prop `hasRowEdit`. When it is true an edit icon will be shown in the
table toolbar. Clicking the edit icon will trigger the callback `onShowRowEdit` and the StatefulTable will set the current
toolbar to be the content of the view prop `view.toolbar.rowEditBarButtons` and all the rows to render the `editDataFunction`
specified by their respective column in the `columns` prop.

For the normal table this needs to be done manually by listening to `onShowRowEdit` and setting `view.toolbar.activeBar: 'rowEdit'`.

Both the StatefulTable and the normal Table requires the `rowEditBarButtons` content to be provided. Below is a simple example:

```jsx
<>
  <Button key="cancel" size="small" kind="tertiary" onClick={onCancelRowEdit}>
    Cancel
  </Button>
  <Button key="save" size="small" onClick={onSaveRowEdit}>
    Save
  </Button>
</>
```

The `onCancelRowEdit` implementation should exit the row edit mode by setting the `view.toolbar.activeBar` to be undefined and clear any data modifications.
The `onSaveRowEdit` implementation should save your modified data and also exit the row edit if all goes well.

All the columns that should be editable need to specify an `editDataFunction` that renders the appropriate form element. The editDataFunction is called with this payload:

```jsx

{
    value: PropTypes.any, // Current cell value
    columnId: PropTypes.string, // The id of the column
    rowId: PropTypes.string, // The id of the row
    row: PropTypes.object // All the data for this row, e.g. { col1: 'valueX', col2: 'valueY' }
}
```

Below is a very basic example of the editDataFunction:

```jsx
// The app should handle input validation and types like dates, select etc
const editDataFunction = ({ value, columnId, rowId }) => {
  const id = `${columnId}-${rowId}`;
  return typeof value === 'boolean' ? (
    <Checkbox
      defaultChecked={value}
      id={id}
      labelText=""
      hideLabel
      onChange={(e) => onDataChange(e, columnId, rowId)}
    />
  ) : (
    <TextInput
      id={id}
      onChange={(e) => onDataChange(e, columnId, rowId)}
      type="text"
      light
      defaultValue={value}
      labelText=""
      hideLabel
    />
  );
};
```

An onDataChange needs to be implemented that handles the changes in a temporary data state until the Save button is clicked. See the table story code for a complete example.

### Single row data editing

It is also possible to only edit a single row at a time by using the option `hasSingleRowEdit` instead of `hasRowEdit`.
The option `hasSingleRowEdit` must be combined with a row action that has the `isEdit` property set to true and the
Save/Cancel buttons must be passed via the prop `view.table.singleRowEditButtons`.

Clicking the "Edit" row action should turn that specific row editable, and it also requires the columns to have
provided an `editDataFunction`. For StatefulTable the row action state is automatically updated with
`isEditMode:true` but for normal tables it should be handled manually. This is done by listening to the `actions.table.onApplyRowAction`
and checking if the action is 'edit'. In that case the state in `view.table.rowActions` should be updated to set `isEditMode: true`
on the row in question.

An example of the `onApplyRowAction` could look like this:

```jsx
const [rowEditedData, setRowEditedData] = useState([]);
const [rowActionsState, setRowActionsState] = useState([]); // This one is passed to the table via view.table.rowActions

const onApplyRowAction = (action, rowId) => {
  if (action === 'edit') {
    setRowEditedData(cloneDeep(currentData)); // Clone the current data to get a temporary one used until save is clicked
    setRowActionsState([...rowActionsState, { rowId, isEditMode: true }]);
  }
};
```

See the table story code for a complete example.

## Column customization

import TableColumnCustomizationContent from './TableColumnCustomizationContent.mdx';

<TableColumnCustomizationContent />

### The column customization modal

import TableColumnCustomizationModalContent from '../TableColumnCustomizationModal/TableColumnCustomizationModalContent.mdx';

<TableColumnCustomizationModalContent />

## User view management

import TableUserViewManagementContent from './TableUserViewManagementContent.mdx';

<TableUserViewManagementContent />

### The manage views modal

import TableManageViewsModalContent from '../TableManageViewsModal/TableManageViewsModalContent.mdx';

<TableManageViewsModalContent />

### The save view modal

import TableSaveViewModalContent from '../TableSaveViewModal/TableSaveViewModalContent.mdx';

<TableSaveViewModalContent />

### The view dropdown

import TableViewDropdownContent from '../TableViewDropdown/TableViewDropdownContent.mdx';

<TableViewDropdownContent />

## Props

### Table Props

| Name                 | Type            | Default | Description                                                                                                                                                                                            |
| :------------------- | :-------------- | :------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| id                   | string          |         | DOM ID for component                                                                                                                                                                                   |
| secondaryTitle       | string          |         | Displays smaller title in header                                                                                                                                                                       |
| tooltip              | node            |         |                                                                                                                                                                                                        |
| useZebraStyles       | bool            |         | render zebra stripes or not                                                                                                                                                                            |
| lightweight          | bool            |         | Deprecated. Lighter styling where regular table too visually heavy                                                                                                                                     |
| columns              | object          |         | (see [column prop](#column-prop))                                                                                                                                                                      |
| columnsGroups        | arrayOf(object) | []      | Array of objects representing column groups                                                                                                                                                            |
| columnsGroups[].id   | string          |         | The id of the column group                                                                                                                                                                             |
| columnsGroups[].name | string          |         | The name of the column group, will appear as the header label                                                                                                                                          |
| data                 | object          |         | Row value data for the body of the table (see [data prop](#data-prop))                                                                                                                                 |
| expandedData         | object          |         | Expanded data for the table details (see [expandedData prop](#expandeddata-prop))                                                                                                                      |
| options              | object          |         | Optional properties to customize how the table should be rendered (see [options prop](#options-prop))                                                                                                  |
| view                 | object          |         | Initial state of the table, should be updated via a local state wrapper component implementation or via a central store/redux see StatefulTable component for an example (see [view prop](#view-prop)) |
| actions              | object          |         | Callbacks for actions of the table, can be used to update state in wrapper component to update `view` props (see [actions prop](#actions-prop))                                                        |
| locale               | string          |         | what locale should we use to format table values if left empty no locale formatting happens                                                                                                            |
| i18n                 | object          |         | (see [i18n prop](#i18n-prop))                                                                                                                                                                          |
| error                | string          |         | Specify the error message that need to be displayed by default. Incase we use `view.table.errorState` property then the error state element will be rendered instead of error message                  |

### Column Prop

| Name                     | Type                     | Default | Description                                                                                                                                                                                            |
| :----------------------- | :----------------------- | :------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| id                       | string                   |         | The id of this column                                                                                                                                                                                  |
| name                     | string                   |         | The display name of the column shown in the header                                                                                                                                                     |
| isSortable               | bool                     |         | Is this column sortable?                                                                                                                                                                               |
| sortFunction             | func                     |         | a custom function for sorting this column. Called with: { columnId: PropTypes.string, direction: PropTypes.oneOf(['ASC','DESC']), data: PropTypes.array }                                              |
| width                    | string                   |         | set the width of this column. ex. 150px or 2rem                                                                                                                                                        |
| align                    | string                   |         | 'start', 'center', or 'end'                                                                                                                                                                            |
| renderDataFunction       | func                     |         | A custom function to render this column. Called with: {value: PropTypes.any, columnId: PropTypes.string, rowId: PropTypes.string, row: PropTypes.shape({[columnId: PropTypes.string]: PropTypes.any})} |
| filter                   | object                   |         |                                                                                                                                                                                                        |
| filter.placeholderText   | string                   |         | i18n text for the filter                                                                                                                                                                               |
| filter.isMultiselect     | bool                     |         | if true the table is filtered based on a multiselect component                                                                                                                                         |
| filter.options           | arrayOf(object)          |         |                                                                                                                                                                                                        |
| filter.options[].id      | string, number, or, bool |         | The id of the filter option used in multiselect filtering                                                                                                                                              |
| filter.options[].text    | string                   |         | the display value for this multiselect filter option                                                                                                                                                   |
| filter.filterFunction    | func                     |         | Custom filter function call with (columnFilterValue, currentValue)                                                                                                                                     |
| overflowMenuItems        | arrayOf(objects)         |         | Optional items for the column overflow menu                                                                                                                                                            |
| overflowMenuItems[].id   | string, number, or, bool |         | The id of the option used in the overflow menu for this column                                                                                                                                         |
| overflowMenuItems[].text | string                   |         | the display text for this overflow menu item                                                                                                                                                           |

### Data Prop

| Name                         | Type            | Default | Description                                                                                           |
| :--------------------------- | :-------------- | :------ | :---------------------------------------------------------------------------------------------------- |
| id                           | string          |         | the id of this row                                                                                    |
| values                       | object          |         | A {[columnId]: value} object containing all the values for this row                                   |
| hasLoadMore                  | bool            |         | An optional boolean prop to define if the row has more data to be loaded                              |
| children                     | arrayOf(object) |         | An optional array of rows (in the same structure as the data prop) for children nested under this row |
| rowActions                   | arrayOf(object) |         | An optional list of actions visible on row how or expansion                                           |
| rowActions[].id              | string          |         | Unique id for this action                                                                             |
| rowActions[].renderIcon      |                 |         | Icon that gets pass through to the button component for this action                                   |
| rowActions[].disabled        | bool            |         | Disables this action                                                                                  |
| rowActions[].labelText       | string          |         | Label text shown on the action button                                                                 |
| rowActions[].isOverflow      | bool            |         | If true, the action will be rendered in the overflow menu not inline on the row                       |
| rowActions[].hasDivider      | bool            |         | Adds a divider above the action item                                                                  |
| rowActions[].iconDescription | string          |         | The descripion text for the icon                                                                      |
| rowActions[].isDelete        | bool            |         | Tells the StatefulTable that this is a delete action                                                  |
| rowActions[].isEdit          | bool            |         | Tells the StatefulTable that this is an edit action                                                   |
| isSelectable                 | bool            |         | is this row selecteable                                                                               |

### ExpandedData Prop

| Name                   | Type            | Default | Description                                     |
| :--------------------- | :-------------- | :------ | :---------------------------------------------- |
| expandedData[]         | arrayOf(object) |         |                                                 |
| expandedData[].rowId   | string          |         | the rowId this expanded content is attached to  |
| expandedData[].content | node            |         | a react node rendered when this row is expanded |

### Options Prop

| Name                        | Type                                           | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| :-------------------------- | :--------------------------------------------- | :------ | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| hasAggregations             | bool                                           |         | If true allows the table to aggregate values of columns in a special row                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| hasPagination               | bool                                           |         | If true the table uses pagination                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| hasRowSelection             | 'multi', 'single', or false                    |         | Enables multiple row selection, single row selection, or turns it off                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| hasRowExpansion             | bool, or {expandRowsExclusively: bool}         |         | Allows rows to be expanded, optionally by collapsing previously expanded rows when an new one is expanded                                                                                                                                                                                                                                                                                                                                                                                                         |
| hasRowEdit                  | bool                                           |         | If true enables the row edit toolbar button and functionality                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| hasRowNesting               | bool, or {hasSingleNestedHierarchy: bool}      |         | Allows nested rows, or only a depth of one nested row                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| hasRowActions               | bool                                           |         | If true, row actions are enabled                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| hasFilter                   | bool, 'onKeyPress', or 'onEnterAndBlur'        |         | enables simply filtering if true, simple filtering on demand if 'onKeyPress', or on enter/blur if 'onEnterAndBlur'                                                                                                                                                                                                                                                                                                                                                                                                |
| hasAdvancedFilter           | bool                                           |         | Enables experimental advanced filtering, but cannot be used with `hasFilter`                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| hasOnlyPageData             | bool                                           |         | if true, the data prop will be assumed to only represent the currently visible page                                                                                                                                                                                                                                                                                                                                                                                                                               |
| hasSearch                   | bool                                           |         | if true, simple search capability is enabled                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| hasFastSearch               | bool                                           | true    | If false, the onApplySearch callback will only be triggered when hitting 'Enter' or if the 'Clear search input' 'x' is clicked.                                                                                                                                                                                                                                                                                                                                                                                   |
| hasColumnSelection          | bool                                           |         |
| hasColumnSelectionConfig    | bool                                           |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| shouldLazyRender            | bool                                           |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| hasRowCountInHeader         | bool                                           |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| hasResize                   | bool                                           |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| hasSingleRowEdit            | bool                                           |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| hasUserViewManagement       | bool                                           |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| shouldExpandOnRowClick      | bool                                           | false   | If true, fire the onRowExpanded callback with the rowId when a row is clicked                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| preserveColumnWidths        | bool                                           | true    | Preserves the widths of existing columns when one or more columns are added, removed, hidden, shown or resized.                                                                                                                                                                                                                                                                                                                                                                                                   |
| useAutoTableLayoutForResize | bool                                           |         | If true removes the "table-layout: fixed" for resizable tables. <br/> Tables with resizable columns get the CSS `table-layout:fixed` by default. “fixed” means that all columns have the same width unless specific widths have been assigned, and “auto” means that the column widths are automatically set based on the content of the cells. This mainly affects the rendering when the columns don’t have a width defined, but the width of the column is also better respected when table-layout is “fixed”. |
| wrapCellText                | 'always', 'never', 'auto', or 'alwaysTruncate' |         | \_ auto - Wrap for tables with dynamic columns widths and truncate for tables with fixed or resizable columns                                                                                                                                                                                                                                                                                                                                                                                                     |
|                             |                                                |         | \_ always - Wrap if needed for all table column configurations                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                             |                                                |         | \_ never - Tables with dynamic columns widths grow larger and tables with fixed or resizable columns truncate.                                                                                                                                                                                                                                                                                                                                                                                                    |
|                             |                                                |         | \_ alwaysTruncate - Always truncate if needed for all table column configurations                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| hasMultiSort                | bool                                           |         | If true, the sortable columns in the table will be able to be sorted by multiple dimensions                                                                                                                                                                                                                                                                                                                                                                                                                       |
| preserveCellWhiteSpace      | bool                                           | false   | If true, use white-space: pre; css                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

### View Prop

| Name                                             | Type                             | Default   | Description                                                                                                                                                                                                               |
| :----------------------------------------------- | :------------------------------- | :-------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| aggregations                                     | object                           |           | Allows certain columns to have an aggregated value in the footer of the table                                                                                                                                             |
| aggregations.label                               | string                           |           | The text label for the aggregations bar in the table footer                                                                                                                                                               |
| aggregations.isHidden                            | bool                             |           | hide the aggregations bar in the footer                                                                                                                                                                                   |
| aggregations.columns                             | arrayOf(object)                  |           |                                                                                                                                                                                                                           |
| aggregations.columns[].id                        | string                           |           | The columnId of the column to aggregate                                                                                                                                                                                   |
| aggregations.columns[].value                     | string or func                   |           | If the aggregation is computed elsewhere, the value can be passed here, or a function can be passed to compute it on the fly                                                                                              |
| aggregations.columns[].align                     | 'start', 'center', or 'end'      |           | allows the aggregate value to align with the rest of the column                                                                                                                                                           |
| aggregations.columns[].isSortable                | bool                             |           | Ensures the aggregate value aligns with the rest of the column by supplying the extra padding needed when a column is sortable                                                                                            |
| pagination                                       | object                           |           | Sets the pagination values for the table                                                                                                                                                                                  |
| pagination.pageSize                              | number                           |           | How many rows are displayed per page                                                                                                                                                                                      |
| pagination.pageSizes                             | number[]                         |           | An array of selections for choosing how many rows are displayed per page.                                                                                                                                                 |
| pagination.page                                  | number                           |           | The current page number                                                                                                                                                                                                   |
| pagination.totalItems                            | number                           |           | The total number of items available to the table                                                                                                                                                                          |
| pagination.maxPages                              | number                           |           | Number of pages rendered in pagination. Must be a positive integer.                                                                                                                                                       |
| pagination.isItemPerPageHidden                   | bool                             |           | Hide displaying the text for the number of rows per page                                                                                                                                                                  |
| filters                                          | object[]                         |           | An array of objects setting the current filter state                                                                                                                                                                      |
| filters[].columnId                               | string                           |           | The columnId of the column being filtered by this value                                                                                                                                                                   |
| filters[].value                                  | string, number, bool, string[]   |           | The value used to filter the given columnId                                                                                                                                                                               |
| advancedFilters                                  | object[]                         |           | An array of objects containing the minimum details of an advancedFilter object that will be used in the dropdown menu of the advanced filter flyout                                                                       |
| advancedFilters[].filterId                       | string                           |           | The filter id                                                                                                                                                                                                             |
| advancedFilters[].filterTitleText                | string                           |           | The display name of the filter                                                                                                                                                                                            |
| advancedFilters[].filterRules                    | object                           |           | The rules for this filter. See the RuleBuilder for details.                                                                                                                                                               |
| selectedAdvancedFilterIds                        | string[]                         |           | An array of filter ids for the currently selected filters                                                                                                                                                                 |
| toolbar                                          | object                           |           |                                                                                                                                                                                                                           |
| toolbar.activeBar                                | 'column', 'filter', or 'rowEdit' |           | Specify which header row to display, will display default header row if null                                                                                                                                              |
| toolbar.customToolbarContent                     | node                             |           | optional content to render inside the toolbar                                                                                                                                                                             |
| toolbar.batchActions                             | object[]                         |           | Specify which batch actions to render in the batch action bar. If empty, no batch action toolbar will display                                                                                                             |
| toolbar.batchActions[].id                        | string                           |           | unique id for this batch action                                                                                                                                                                                           |
| toolbar.batchActions[].labeltext                 | string                           |           | text shown on the action button                                                                                                                                                                                           |
| toolbar.batchActions[].icon                      | element                          |           | The icon rendered on the button for this action                                                                                                                                                                           |
| toolbar.batchActions[].iconDescription           | string                           |           | The description used for aria on this icon                                                                                                                                                                                |
| toolbar.search                                   | object                           |           |                                                                                                                                                                                                                           |
| toolbar.search.value                             | string                           |           | Deprecated in favor of defaultValue                                                                                                                                                                                       |
| toolbar.search.defaultValue                      | string                           |           | The current search value passed to the table                                                                                                                                                                              |
| toolbar.search.defaultExpanded                   | bool                             |           | The current search value passed to the table                                                                                                                                                                              |
| toolbar.search.onChange                          | func                             |           |                                                                                                                                                                                                                           |
| toolbar.search.onExpand                          | func                             |           |                                                                                                                                                                                                                           |
| toolbar.search.isExpanded                        | bool                             |           | Should the search bar always be expanded                                                                                                                                                                                  |
| toolbar.isDisabled                               | bool                             |           | Disable the toolbar                                                                                                                                                                                                       |
| toolbar.rowEditBarButtons                        | node                             |           | buttons to be shown with when activeBar is 'rowEdit'                                                                                                                                                                      |
| toolbar.toolbarActions                           | arrayOf(object)                  |           | An array of objects for adding actions to the overflow menu in the toolbar                                                                                                                                                |
| toolbar.toolbarActions[].id                      | string                           |           | the id of this action                                                                                                                                                                                                     |
| toolbar.toolbarActions[].labelText               | string                           |           | The text to display in the overflow menu                                                                                                                                                                                  |
| toolbar.toolbarActions[].hidden                  | bool                             |           | This will hide this item from the menu                                                                                                                                                                                    |
| toolbar.toolbarActions[].disabled                | bool                             |           | This will show the item, but it will be disabled                                                                                                                                                                          |
| toolbar.toolbarActions[].isDelete                | bool                             |           | Show the item, and turn the background red on hover                                                                                                                                                                       |
| toolbar.toolbarActions[].hasDivider              | bool                             |           | Show a divider at the top of this action item                                                                                                                                                                             |
| toolbar.toolbarActions[].renderIcon              | node, func, string               |           | Can be a string of a handful of included icons, a function to render an icon, or an icon element                                                                                                                          |
| toolbar.toolbarActions[].isActive                | bool                             | false     | used when the action is not in the overflow menu to show it is in active state                                                                                                                                            |
| toolbar.toolbarActions[].isOverflow              | bool                             | false     | Force this item to appear in the overflow menu                                                                                                                                                                            |
| table                                            | object                           |           |                                                                                                                                                                                                                           |
| table.isSelectAllSelected                        | bool                             |           | If true, the select all option is checked. There is normally no need to set this prop since both the Table and the StatefulTable will update it automatically based on the selectedIds prop and the actual rows           |
| table.isSelectAllIndeterminate                   | bool                             |           | If true, the select all gets an indeterminate state. There is normally no need to set this prop since both the Table and the StatefulTable will update it automatically based on the selectedIds prop and the actual rows |
| table.selectedIds                                | string[]                         |           | An array of row ids that are currently selected                                                                                                                                                                           |
| table.sort                                       | object, array                    |           | an object or array of objects in the form of {columnId: string; direction: 'NONE' or 'ASC' or 'DESC' }                                                                                                                    |
| table.sort.columnId                              | string                           |           | the id of the column to sort                                                                                                                                                                                              |
| table.sort.direction                             | 'NONE', 'ASC', or 'DESC'         |           |                                                                                                                                                                                                                           |
| table.ordering                                   | object[]                         |           | an array of objects representing the order and visibility of the columns                                                                                                                                                  |
| table.ordering[].columnId                        | string                           |           | The id of the column to make hidden or visible                                                                                                                                                                            |
| table.ordering[].isHidden                        | bool                             |           | If true, the column with columnId will be hidden in the table                                                                                                                                                             |
| table.ordering[].columnGroupId                   | string                           |           | The id of the column group this column belongs to if any                                                                                                                                                                  |
| table.rowActions                                 | object[]                         |           |                                                                                                                                                                                                                           |
| table.rowsActions[].rowId                        | string                           |           | The rowID associated with this action                                                                                                                                                                                     |
| table.rowActions[].isRunning                     | bool                             |           | Is this action currently running on this row                                                                                                                                                                              |
| table.rowActions[].isEditMode                    | bool                             |           | Is this action available in edit mode                                                                                                                                                                                     |
| table.rowActions[].error                         | object                           |           | Object representing the error state for the action on this row                                                                                                                                                            |
| table.rowActions[].error.title                   | node                             |           | The title node for this error on this row                                                                                                                                                                                 |
| table.rowActions[].error.message                 | node                             |           | The message node associated with this error on this row action                                                                                                                                                            |
| table.rowActions[].error.learnMoreURL            | string                           |           | The link to learn more about this error                                                                                                                                                                                   |
| table.singleRowEditButtons                       | element                          |           | Buttons shown when editing a single row                                                                                                                                                                                   |
| table.expandedIds                                | string[]                         |           | an array of strings representing the rowIds to be expanded                                                                                                                                                                |
| table.loadingMoreIds                             | string[]                         |           | an array of strings representing the rowIds with the load more active                                                                                                                                                     |
| table.emptyState                                 | object or element                |           | If a React element is provided, it will be rendered in place of the default                                                                                                                                               |
| table.emptyState.message                         | node                             |           | The message to show when the table is empty                                                                                                                                                                               |
| table.emptyState.messageWithFilters              | node                             |           | Show a different message if no content is in the table matching the filters                                                                                                                                               |
| table.emptyState.buttonLabel                     | node                             |           | If a label is not provided, no action button will be rendered                                                                                                                                                             |
| table.emptyState.buttonLabelWithFilters          | node                             |           | Show a different button label if no content is in the table matching the filters                                                                                                                                          |
| table.errorState                                 | element                          |           | Show the table errorState element when there is any error occure                                                                                                                                                          |
| table.loadingState                               | object                           |           |
| table.loadingState.isLoading                     | bool                             |           | If the table is currently loading                                                                                                                                                                                         |
| table.loadingState.rowCount                      | number                           |           | The number of rows loaded                                                                                                                                                                                                 |
| table.showMultiSortModal                         | bool                             | false     | Shows or hides the MultiSort modal                                                                                                                                                                                        |
| table.multiSortModal                             | object                           | undefined |                                                                                                                                                                                                                           |
| table.multiSortModal.anticipatedColumn           | object                           | undefined | An object containing {columnId, direction} of the column that multi-sort was initiated on                                                                                                                                 |
| table.multiSortModal.anticipatedColumn.columnId  | string                           | undefined | The columnId of the column multi-sort was initiated on. This is to automatically select it in the modal                                                                                                                   |
| table.multiSortModal.anticipatedColumn.direction | 'ASC' or 'DESC'                  | undefined | The default direction for this column selected                                                                                                                                                                            |

### Actions Prop

| Name                            | Type   | Default | Description                                                                                                                                                                                                     |
| :------------------------------ | :----- | :------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| pagination                      | object |         |
| pagination.onChangePage         | func   |         | Specify a callback for when the current page or page size is changed. This callback is passed an object parameter containing the current page and the current page size                                         |
| toolbar                         | object |         |                                                                                                                                                                                                                 |
| toolbar.onApplyFilter           | func   |         |                                                                                                                                                                                                                 |
| toolbar.onToggleFilter          | func   |         |                                                                                                                                                                                                                 |
| toolbar.onShowRowEdit           | func   |         |                                                                                                                                                                                                                 |
| toolbar.onToggleColumnSelection | func   |         |                                                                                                                                                                                                                 |
| toolbar.onClearAllFilters       | func   |         | Specify a callback for when the user clicks toolbar button to clear all filters. Recieves a parameter of the current filter values for each column                                                              |
| toolbar.onCancelBatchAction     | func   |         | Callback for when the automatcally generated Cancel action in the batch actions bar is clicked.                                                                                                                 |
| toolbar.onApplyBatchAction      | func   |         | Callback for all the batch actions except the cancel. Is called with the id of the clicked action. For the StatefulTable the current selections are received as second parameter.                               |
| toolbar.onApplySearch           | func   |         | Apply a search criteria to the table                                                                                                                                                                            |
| toolbar.onDownloadCSV           | func   |         | Download the table contents                                                                                                                                                                                     |
| toolbar.onApplyAdvancedFilter   | func   |         |                                                                                                                                                                                                                 |
| toolbar.onToggleAdvancedFilter  | func   |         | Toggles the advanced filter flyout open                                                                                                                                                                         |
| toolbar.onRemoveAdvancedFilter  | func   |         | Remove the selected advancedFilter from the table                                                                                                                                                               |
| toolbar.onCreateAdvancedFilter  | func   |         | Fired the 'create new advanced filter' button is clicked.                                                                                                                                                       |
| toolbar.onCancelAdvancedFilter  | func   |         | Fired when then 'Cancel' button is clicked in the advanced filter flyout menu                                                                                                                                   |
| toolbar.onChangeAdvancedFilter  | func   |         | Fired when an advanced filter is selected or removed.                                                                                                                                                           |
| toolbar.onToggleAggregations    | func   |         | Fired when the "Toggle aggregations" option is clicked from the overflow menu in the table toolbar                                                                                                              |
| toolbar.onApplyToolbarAction    | func   |         | Fired when clicking on toolbarActions in the table toolbar                                                                                                                                                      |
| table                           | object |         |                                                                                                                                                                                                                 |
| table.onRowSelected             | func   |         |                                                                                                                                                                                                                 |
| table.onRowClicked              | func   |         |                                                                                                                                                                                                                 |
| table.onRowExpanded             | func   |         |                                                                                                                                                                                                                 |
| table.onSelectAll               | func   |         |                                                                                                                                                                                                                 |
| table.onChangeSort              | func   |         |                                                                                                                                                                                                                 |
| table.onApplyRowAction          | func   |         | callback if a row action is clicked called with the id of the action then the id of the row if you return a promise from apply row action the stateful table will assume you're asynchronous and give a spinner |
| table.onClearRowError           | func   |         |                                                                                                                                                                                                                 |
| table.onEmptyStateAction        | func   |         |                                                                                                                                                                                                                 |
| table.onChangeOrdering          | func   |         |                                                                                                                                                                                                                 |
| table.onColumnSelectionConfig   | func   |         |                                                                                                                                                                                                                 |
| table.onColumnResize            | func   |         |                                                                                                                                                                                                                 |
| table.onOverflowItemClicked     | func   |         |                                                                                                                                                                                                                 |
| table.onSaveMultiSortColumns    | func   |         |                                                                                                                                                                                                                 |
| table.onCancelMultiSortColumns  | func   |         |                                                                                                                                                                                                                 |
| table.onAddMultiSortColumn      | func   |         |                                                                                                                                                                                                                 |
| table.onRemoveMultiSortColumn   | func   |         |                                                                                                                                                                                                                 |
| table.onTableErrorStateAction   | func   |         | callback action relavent on error state. This can be used with `error` message. When `view.table.errorState` property is used then this callback function has no effect.                                        |
| table.onRowLoadMore             | func   |         | callback if a load more row is clicked called with the id of the row id.                                                                                                                                        |
| onUserViewModified              | func   |         | callback for actions relevant for view management                                                                                                                                                               |

### i18n Prop

| Name                             | Type         | Default                  | Description                                            |
| :------------------------------- | :----------- | :----------------------- | :----------------------------------------------------- |
| pageBackwardAria                 | string       |                          | pagination                                             |
| pageForwardAria                  | string       |                          |
| pageNumberAria                   | string       |                          |
| itemsPerPage                     | string       |                          |
| itemsRangeWithTotal              | func         |                          | (min, max, total) => `${min}-${max} of ${total} items` |
| pageRange                        | func         |                          | (current, total) => `${current} of ${total} pages`     |
| overflowMenuAria                 | string       |                          |
| clickToExpandAria                | string       |                          |
| clickToCollapseAria              | string       |                          |
| selectAllAria                    | string       |                          |
| selectRowAria                    | string       |                          |
| searchLabel                      | string       |                          | toolbar                                                |
| searchPlaceholder                | string       |                          |
| clearAllFilters                  | string       |                          |
| columnSelectionButtonAria        | string       |                          |
| columnSelectionConfig            | string       |                          |
| filterButtonAria                 | string       |                          |
| editButtonAria                   | string       |                          |
| clearFilterAria                  | string       |                          |
| filterAria                       | string       |                          |
| downloadIconDescription          | string       |                          |
| openMenuAria                     | string       |                          |
| closeMenuAria                    | string       |                          |
| clearSelectionAria               | string       |                          |
| batchCancel                      | string       |                          |
| itemsSelected                    | string, func |                          | (selectedCount) => `${selectedCount} items selected`   |
| itemSelected                     | string, func |                          | (selectedCount) => `${selectedCount} item selected`    |
| inProgressText                   | string       |                          | I18N label for in progress                             |
| actionFailedText                 | string       |                          | I18N label for action failed                           |
| learnMoreText                    | string       |                          | I18N label for learn more                              |
| dismissText                      | string       |                          | I18N label for dismiss                                 |
| filterNone                       | string       |                          |                                                        |
| filterAscending                  | string       |                          |                                                        |
| filterDescending                 | string       |                          |                                                        |
| rowCountInHeader                 | func         |                          |                                                        |
| multiSortModalTitle              | string       | 'Select columns to sort' |                                                        |
| multiSortModalPrimaryLabel       | string       | 'Sort'                   |                                                        |
| multiSortModalSecondaryLabel     | string       | 'Cancel'                 |                                                        |
| multiSortSelectColumnLabel       | string       | 'Select a column'        |                                                        |
| multiSortSelectColumnSortByTitle | string       | 'Sort by'                |                                                        |
| multiSortSelectColumnThenByTitle | string       | 'Then by'                |                                                        |
| multiSortDirectionLabel          | string       | 'Select a direction'     |                                                        |
| multiSortDirectionTitle          | string       | 'Sort order'             |                                                        |
| multiSortAddColumn               | string       | 'Add column'             |                                                        |
| multiSortRemoveColumn            | string       | 'Remove column'          |                                                        |
| multiSortAscending               | string       | 'Ascending'              |                                                        |
| multiSortDescending              | string       | 'Descending'             |                                                        |
| loadMoreText                     | string       | 'Load more...'           |                                                        |

## Source Code

[Source code](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/Table)

## Feedback

Help us improve this component by providing feedback, asking questions on Slack, or updating this file on
[GitHub](https://github.com/carbon-design-system/carbon-addons-iot-react/tree/next/packages/react/src/components/Table/Table.mdx).

```

```
